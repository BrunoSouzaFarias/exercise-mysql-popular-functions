# Boas-vindas ao reposit√≥rio de exerc√≠cios de MySQL fun√ß√µes mais utilizadas

Nesse exerc√≠cio, utilizaremos as `fun√ß√µes mais utilizadas` do MySQL para encontrar informa√ß√µes dentro de um banco de dados. Bora l√°?

Para desenvolver o exerc√≠cio, voc√™ dever√° seguir contidas nesse README. Tenha aten√ß√£o ao que √© pedido e em caso de d√∫vida, procure o time de instru√ß√£o via _Slack_ ou nas mentorias! #vqv üöÄ

## Termos e acordos

Ao iniciar este exerc√≠cio, voc√™ concorda com as diretrizes do C√≥digo de Conduta e do Manual da Pessoa Estudante da Trybe.

## Entreg√°veis

<details>
  <summary><strong>ü§∑üèΩ‚Äç‚ôÄÔ∏è Como entregar</strong></summary><br />

Para entregar o seu exerc√≠cio voc√™ dever√° criar um Pull Request neste reposit√≥rio.

Lembre-se que voc√™ pode consultar nosso conte√∫do sobre [Git & GitHub](https://app.betrybe.com/learn/course/5e938f69-6e32-43b3-9685-c936530fd326/module/fc998c60-386e-46bc-83ca-4269beb17e17/section/fe827a71-3222-4b4d-a66f-ed98e09961af/day/35e03d5e-6341-4a8c-84d1-b4308b2887ef/lesson/573db55d-f451-455d-bdb5-66545668f436) e nosso [Blog - Git & GitHub](https://blog.betrybe.com/tecnologia/git-e-github/) sempre que precisar!
</details>

<details>
  <summary><strong>üë®‚Äçüíª O que dever√° ser desenvolvido</strong></summary><br />

  Hoje, nosso exerc√≠cio ser√° trabalhar utilizando as `principais fun√ß√µes do MySQL`.
</details>

<details>
  <summary><strong>üöµ Habilidades a serem trabalhadas</strong></summary><br />

  <ul>
    <li>Fun√ß√µes matem√°ticas;</li>
    <li>Fun√ß√µes de manipula√ß√£o de datas;</li>
  </ul>

</details>

# Orienta√ß√µes

<details>
  <summary><strong>üêã Rodando no Docker vs Localmente</strong></summary>
  
  ## üëâ Com Docker

  **:warning: Antes de come√ßar, seu docker-compose precisa estar na vers√£o 1.29 ou superior. [Veja aqui](https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-compose-on-ubuntu-20-04-pt) ou [na documenta√ß√£o](https://docs.docker.com/compose/install/) como instal√°-lo. No primeiro artigo, voc√™ pode substituir onde est√° com `1.26.0` por `1.29.2`.**


  > :information_source: Rode os servi√ßos `node` e `db` com o comando `docker-compose up -d --build`.

  * Lembre-se de parar o `mysql` se estiver usando localmente na porta padr√£o (`3306`), ou adapte, caso queria fazer uso da aplica√ß√£o em containers;

  * Esses servi√ßos ir√£o inicializar um container chamado `api_exercise` e outro chamado `db_exercise`;

  * A partir daqui voc√™ pode rodar o container `api` via CLI ou abri-lo no VS Code;

  > :information_source: Use o comando `docker exec -it api bash`.

  * Ele te dar√° acesso ao terminal interativo do container criado pelo compose, que est√° rodando em segundo plano.

  > :information_source: Instale as depend√™ncias [**Caso existam**] com `npm install`. (Instale dentro do container)
  
  * **:warning: Aten√ß√£o:** Caso opte por utilizar o Docker, **TODOS** os comandos dispon√≠veis no `package.json` (npm start, npm test, npm run dev, ...) devem ser executados **DENTRO** do container, ou seja, no terminal que aparece ap√≥s a execu√ß√£o do comando `docker exec` citado acima. 

  * **:warning: Aten√ß√£o:** O **git** dentro do container n√£o vem configurado com suas credenciais. Ou fa√ßa os commits fora do container, ou configure as suas credenciais do git dentro do container.

  * **:warning: Aten√ß√£o:** N√£o rode o comando npm audit fix! Ele atualiza v√°rias depend√™ncias do projeto, e essa atualiza√ß√£o gera conflitos com o avaliador.

  * ‚ú® **Dica:** A extens√£o `Remote - Containers` (que estar√° na se√ß√£o de extens√µes recomendadas do VS Code) √© indicada para que voc√™ possa desenvolver sua aplica√ß√£o no container Docker direto no VS Code, como voc√™ faz com seus arquivos locais.

  ![sequelize test](./public/remote-container.png)

  <br />
  
  ## üëâ Sem Docker

  > :information_source: Instale as depend√™ncias [**Caso existam**] com `npm install`
  
  * **:warning: Aten√ß√£o:** N√£o rode o comando npm audit fix! Ele atualiza v√°rias depend√™ncias do exerc√≠cio, e essa atualiza√ß√£o gera conflitos com o avaliador.

  * **‚ú® Dica:** Para rodar o exerc√≠cio desta forma, obrigatoriamente voc√™ deve ter o `node` instalado em seu computador.
  * **‚ú® Dica:** O avaliador espera que a vers√£o do `node` utilizada seja a 16.

  <br/>
</details>

<details>
  <summary id="antes-comecar-desenvolver"><strong>‚ÄºÔ∏è Antes de come√ßar a desenvolver</strong></summary><br />

1. Clone o reposit√≥rio

* `git clone git@github.com:tryber/sd-0x-exercise-sequelize-associations.git`.
* Entre na pasta do reposit√≥rio que voc√™ acabou de clonar:
  * `cd sd-031-b-exercise-mysql-popular-functions`

2. Instale as depend√™ncias

* `npm install`

3. Crie uma branch a partir da branch `main`

* Verifique que voc√™ est√° na branch `main`
  * Exemplo: `git branch`
* Se n√£o estiver, mude para a branch `main`
  * Exemplo: `git checkout main`
* Agora, crie uma branch onde voc√™ vai guardar os `commits` do seu exerc√≠cio
  * Voc√™ deve criar uma branch no seguinte formato: `nome-de-usuario-nome-do-exerc√≠cio`
  * Exemplo: `git checkout -b seunome-exercise-mysql-popular-functions`

4. Adicione as mudan√ßas ao _stage_ do Git e fa√ßa um `commit`

* Verifique que as mudan√ßas ainda n√£o est√£o no _stage_
  * Exemplo: `git status` (deve aparecer o arquivo que voc√™ alterou como exercicio1.sql)
* Adicione o novo arquivo ao _stage_ do Git
  * Exemplo:
    * `git add .` (adicionando todas as mudan√ßas - _que estavam em vermelho_ - ao stage do Git)
    * `git status` (deve aparecer listado o arquivo _seunome/README.md_ em verde)
* Fa√ßa o `commit` inicial
  * Exemplo:
    * `git commit -m 'iniciando o exerc√≠cio de Sequelize Associations'` (fazendo o primeiro commit)
    * `git status` (deve aparecer uma mensagem tipo _nothing to commit_ )

5. Adicione a sua branch com o novo `commit` ao reposit√≥rio remoto

* Usando o exemplo anterior: `git push -u origin seunome-exercise-mysql-popular-functions`

6. Crie um novo `Pull Request` _(PR)_

* V√° at√© a p√°gina de _Pull Requests_ do [reposit√≥rio no GitHub](https://github.com/tryber/sd-0x-exercise-mysql-mysql-popular-functions/pulls)
* Clique no bot√£o verde _"New pull request"_
* Clique na caixa de sele√ß√£o _"Compare"_ e escolha a sua branch **com aten√ß√£o**
* Coloque um t√≠tulo para a sua _Pull Request_
  * Exemplo: _"Adiciona migrations"_
* Clique no bot√£o verde _"Create pull request"_
* Adicione uma descri√ß√£o para o _Pull Request_ e clique no bot√£o verde _"Create pull request"_
* **N√£o se preocupe em preencher mais nada por enquanto!**
* Volte at√© a [p√°gina de _Pull Requests_ do reposit√≥rio](https://github.com/tryber/sd-031-b-exercise-mysql-popular-functions/pulls) e confira que o seu _Pull Request_ est√° criado

</details>

<details>
  <summary><strong>‚å®Ô∏è Durante o desenvolvimento</strong></summary><br />

* Fa√ßa `commits` das altera√ß√µes que voc√™ fizer no c√≥digo regularmente

* Lembre-se de sempre ap√≥s um (ou alguns) `commits` atualizar o reposit√≥rio remoto

* Os comandos que voc√™ utilizar√° com mais frequ√™ncia s√£o:
  1. `git status` _(para verificar o que est√° em vermelho - fora do stage - e o que est√° em verde - no stage)_
  2. `git add` _(para adicionar arquivos ao stage do Git)_
  3. `git commit` _(para criar um commit com os arquivos que est√£o no stage do Git)_
  4. `git push -u origin nome-da-branch` _(para enviar o commit para o reposit√≥rio remoto na primeira vez que fizer o `push` de uma nova branch)_
  5. `git push` _(para enviar o commit para o reposit√≥rio remoto ap√≥s o passo anterior)_

</details>

<details>
  <summary><strong>üõ† Execu√ß√£o de testes localmente</strong></summary>

  > :information_source: IMPORTANTE

  1. Para executar localmente os testes √© preciso adicionar vari√°veis de ambiente com suas credenciais do `mysql`, voc√™ pode fazer de algumas formas:

   Adicionando os dados a arquivo um arquivo com o nome `.env`, como no est√£o no de exemplo, `.env.example`, basta renome√°-lo e ajust√°-lo com suas credenciais:
  
      ```sh
        # ./.env

        DB_HOST=localhost # o padr√£o √© `localhost`
        DB_NAME=hospital_control
        DB_USER=root # ou seu usu√°rio
        DB_PASSWORD=password # senha do usu√°rio acima, o padr√£o √© `password`
        DB_PORT=3306 # a padr√£o √© `3306`
      ```
  
      - Depois disso basta rodar `npm test`.

    1. Voc√™ tamb√©m pode usar as vari√°veis de ambiente antes do comando `npm test` como abaixo:
      ```sh
      DB_USER=<SEU_NOME_DE_PESSOA_USUARIA> DB_PASSWORD=<SUA SENHA> DB_HOST=<NOME_DO_HOST> DB_PORT=<PORTA> npm test
      ```

    * Ou seja, suponha que para poder acessar a base de dados feita neste exerc√≠cio voc√™ tenha `root` como seu nome de pessoa usu√°ria, `password` como senha, `localhost` como host e `1337` como porta. Logo, voc√™ executaria:
      ```sh
      DB_USER=root DB_PASSWORD=password DB_HOST=localhost DB_PORT=1337 npm test
      ```

    * Usando o exemplo anterior de base, suponha que voc√™ n√£o tenha setado uma senha para `root` e esteja usando a porta padr√£o (3306). Neste caso, voc√™ executaria:
      ```sh
      DB_USER=root DB_PASSWORD= DB_HOST=localhost DB_PORT= npm test
      ```

    **Dica**: vari√°veis de ambiente definidas na mesma linha do comando valem apenas para aquele comando. Se preferir, voc√™ pode exportar as vari√°veis de ambiente para toda a _sess√£o_ (todos os comandos at√© voc√™ fechar aquele terminal). Por exemplo:

    ```sh
    export DB_USER=root DB_PASSWORD=password HOSTNAME=localhost PORT=3306
    ```

  ---

  > :information_source: Scripts para executar os testes locais:

  Vamos usar o Jest para executar os testes, use o comando a seguir para executar todos os testes: 

  ```sh
  npm test
  ```

<br />
</details>

<details>
  <summary><strong>ü§ù Depois de terminar o desenvolvimento (opcional)</strong></summary><br />

  Para sinalizar que o seu exerc√≠cio est√° pronto para o _"Code Review"_, fa√ßa o seguinte:

* V√° at√© a p√°gina **DO SEU** _Pull Request_, adicione a label de _"code-review"_ e marque seus colegas
  * No menu √† direita, clique no _link_ **"Labels"** e escolha a _label_ **code-review**
  * No menu √† direita, clique no _link_ **"Assignees"** e escolha **o seu usu√°rio**
  * No menu √† direita, clique no _link_ **"Reviewers"** e digite `students`, selecione o time `tryber/students-sd-00`

  Caso tenha alguma d√∫vida, [aqui tem um video explicativo](https://vimeo.com/362189205).

</details>

<details>
  <summary><strong>üïµüèø Revisando um pull request</strong></summary><br />

  Use o conte√∫do sobre [Code Review](https://app.betrybe.com/learn/course/5e938f69-6e32-43b3-9685-c936530fd326/module/f04cdb21-382e-4588-8950-3b1a29afd2dd/section/b3af2f05-08e5-4b4a-9667-6f5f729c351d/lesson/36268865-fc46-40c7-92bf-cbded9af9006) para te ajudar a revisar os _Pull Requests_.

</details>

<details>
   <summary><strong>üóÇ Compartilhe seu portf√≥lio!</strong></summary>

Agora que voc√™ finalizou o exerc√≠cio, chegou a hora de mostrar ao mundo que voc√™ aprendeu algo novo! üöÄ

Siga esse [**guia que preparamos com carinho**](https://app.betrybe.com/learn/course/5e938f69-6e32-43b3-9685-c936530fd326/module/a3cac6d2-5060-445d-81f4-ea33451d8ea4/section/d4f5e97a-ca66-4e28-945d-9dd5c4282085/day/eff12025-1627-42c6-953d-238e9222c8ff/lesson/49cb103b-9e08-4ad5-af17-d423a624285a) para disponibilizar o exerc√≠cio finalizado no seu GitHub pessoal.

Esse passo √© super importante para ganhar mais visibilidade no mercado de trabalho, mas tamb√©m √© √∫til para manter um back-up do seu trabalho.

E voc√™ sabia que o LinkedIn √© a principal rede social profissional e compartilhar o seu aprendizado l√° √© muito importante para quem deseja construir uma carreira de sucesso? Compartilhe esse exerc√≠cio no seu LinkedIn, marque o perfil da Trybe (@trybe) e mostre para a sua rede toda a sua evolu√ß√£o.

   <br />
 </details>

</details>

# Exerc√≠cios

## Exerc√≠cios n√£o avaliativos

### üöÄ Exerc√≠cio 1
- Escreva uma query que exiba o maior sal√°rio da tabela.

### üöÄ Exerc√≠cio 2
- Escreva uma query que exiba a diferen√ßa entre o maior e o menor sal√°rio.

### üöÄ Exerc√≠cio 3
- Escreva uma query que exiba a m√©dia salarial de cada job_id, ordenando pela m√©dia salarial em ordem decrescente.

### üöÄ Exerc√≠cio 4
- Escreva uma query que exiba a quantidade de dinheiro necess√°ria para realizar o pagamento de todas as pessoas funcion√°rias.

### üöÄ Exerc√≠cio 5
- Escreva uma query que exiba quatro informa√ß√µes: o maior sal√°rio, o menor sal√°rio, a soma de todos os sal√°rios e a m√©dia dos sal√°rios. Todos os valores devem ser formatados para ter apenas duas casas decimais.

### üöÄ Exerc√≠cio 6
- Escreva uma query que exiba a quantidade de pessoas que trabalham como pessoas programadoras (it_prog).

### üöÄ Exerc√≠cio 7
- Escreva uma query que exiba a quantidade de dinheiro necess√°ria para efetuar o pagamento de cada profiss√£o (job_id).

### üöÄ Exerc√≠cio 7
- Utilizando a query anterior, fa√ßa as altera√ß√µes para que seja exibido somente a quantidade de dinheiro necess√°ria para cobrir a folha de pagamento das pessoas programadoras (it_prog).

### üöÄ Exerc√≠cio 9
- Escreva uma query que exiba em ordem decrescente a m√©dia salarial de todos os cargos, exceto das pessoas programadoras (it_prog).

### üöÄ Exerc√≠cio 11
- Escreva uma query que atualize a coluna phone_number, de modo que todos os telefones iniciados por 515 agora devem iniciar com 777.

### üöÄ Exerc√≠cio 12
- Escreva uma query que s√≥ exiba as informa√ß√µes dos funcion√°rios cujo o primeiro nome tenha oito ou mais caracteres.

### üöÄ Exerc√≠cio 13
- Escreva uma query que exiba as seguintes informa√ß√µes de cada funcion√°rio: id, primeiro nome e ano no qual foi contratado (exiba somente o ano).

### üöÄ Exerc√≠cio 14
- Escreva uma query que exiba as seguintes informa√ß√µes de cada funcion√°rio: id, primeiro nome e dia do m√™s no qual foi contratado (exiba somente o dia).

### üöÄ Exerc√≠cio 15
- Escreva uma query que exiba as seguintes informa√ß√µes de cada funcion√°rio: id, primeiro nome e m√™s no qual foi contratado (exiba somente o m√™s).

### üöÄ Exerc√≠cio 16
- Escreva uma query que exiba os nomes dos funcion√°rios em letra mai√∫scula.

### üöÄ Exerc√≠cio 17
- Escreva uma query que exiba o sobrenome e a data de contrata√ß√£o de todos os funcion√°rio contratados em julho de 1987.

### üöÄ Exerc√≠cio 18
- Escreva uma query que exiba as seguintes informa√ß√µes de cada funcion√°rio: nome, sobrenome, tempo que trabalha na empresa (em dias).

## Exerc√≠cios avaliativos

### üöÄ Exerc√≠cio 10

- Escreva um query que exiba m√©dia salarial e o n√∫mero de funcion√°rios de todos os departamentos com mais de dez funcion√°rios. Dica: agrupe pelo department_id.